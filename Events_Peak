%Determine event time on closed arm and open arm in elevated-zero maze
%experiment. 
%Code designed by Lucas Galdino (lucas@edu.isd.org.br |
%lucas.galdinob@gmail.com). 
%It is necessary to run the code for each animal data. 

clear;
close all
clc;

%Load CSV Data
Data = csvread('SAL9.csv',1,0);  %Load CSV file

%Found peaks (first moment that the animal reach closed or open arm) 
[~,EventsC] = findpeaks(Data(:,6));  %Columns related to closed arm (Column 6 of the dataset)
[~,EventsO] = findpeaks(Data(:,8));  %Columns related to open arm (Column 8 of the dataset)

for i=1:(EventsC) %Loop to transform the peaks (events) into a Electrophysiology marker (Closed Arm)
    EventC(i,:)=((EventsC(i,:)/80)*1000);
end

for i=1:(EventsO)%Loop to transform the peaks (events) into a Electrophysiology marker (Open Arm)
    EventO(i,:)=((EventsO(i,:)/80)*1000);
end

save('%GeneralData.txt', 'EventC', '-ASCII');
save('%GeneralData.txt', 'EventO', '-ASCII');




